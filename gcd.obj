; This subroutine computes the GCD of unsigned integers a and b using Euclid's Algorithm
; (Subtraction). The values a, b are both 8-bit values stored in memory, and
; the values of a and b are modified throughout the subroutine, which means that the
; original a and b values are destroyed. At the end of the subroutine, the GCD of the
; original a and b values is stored in the variable a and the accumulator. This subroutine
; assumes the inputs are unsigned, so there is no checking for signed integers.
;
; Revision History
;     11 Feb 26  Wilson Duan      Initial revision
;     11 Feb 26  Wilson Duan      Fix bug: populate zero flag to check if b is 0


;0000       start:
0000  8001;     LDD   b			        ;get the value of b in accumulator
0001  3300;     CMPI  0                 ;check if b is 0, populates flags
0002  9F12;     JZ    Done		        ;if b is 0, we're done
0003  1F80;     NOP                     ;branch slot

;0004       SubtractLoop:		        ;subtract b from a until a is less than b
0004  8000;     LDD   a
0005  3001;     CMP   b                 ;checks if a < b, and stores info in ALU flags
0006  8F06;     JB    Swap              ;if a < b, then call swap function
0007  1F80;     NOP                     ;branch slot
0008  8000;     LDD   a
0009  1001;     SUB   b                 ;this line and the below line does
000A  A000;     STD   a                 ;a = a - b
000B  C004;     JMP   SubtractLoop      ;continue the subtraction loop
000C  1F80;     NOP                     ;branch slot
            
;000D       Swap:
000D  8000;     LDD   a                 ;get a
000E  0780;     TAX                     ;and put it in X temporarily
000F  8001;     LDD   b                 ;now get b
0010  A000;     STD   a                 ;and store it in a
0011  6701;     TXA                     ;get original a back
0012  A001;     STD   b                 ;and store it in b
0013  C000;     JMP   start             ;jump back to start to keep looping
0014  1F80;     NOP                     ;branch slot
                

;0014       Done:			            ;done with the calculation
0014  8000;     LDD   a			        ;load a into the accumulator since a is the GCD
0015  1F00;     RTS                     ;and return



;Variables
;00     a       DB    ?			;the first number for which the GCD will be computed
;01     b       DB    ?			;the second number for which the GCD will be computed
